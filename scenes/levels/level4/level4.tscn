[gd_scene format=3 uid="uid://d2xd16p47lh8m"]

[ext_resource type="PackedScene" uid="uid://bl4j3luccea8d" path="res://scenes/player/player.tscn" id="1_27x05"]
[ext_resource type="PackedScene" uid="uid://c647jebk15ghl" path="res://scenes/levels/level4/level4_mask.tscn" id="2_gor1f"]
[ext_resource type="PackedScene" uid="uid://432b310di2s4" path="res://assets/meshes/island2/island2.glb" id="3_6jcyl"]
[ext_resource type="Material" uid="uid://4k2l66sq500q" path="res://assets/textures/ground2/Ground093B_1K-JPG.tres" id="4_q4udx"]
[ext_resource type="Shape3D" uid="uid://hb8aq2vlpxo6" path="res://resources/collisionmaps/level4.res" id="5_gor1f"]
[ext_resource type="Texture2D" uid="uid://2pagqy2q1vdr" path="res://assets/img/landscape/Palme.png" id="5_rnqjc"]
[ext_resource type="PackedScene" uid="uid://bovwl1ic8wyrw" path="res://scenes/levels/enemy_manager/enemy_manager.tscn" id="6_3jq6i"]
[ext_resource type="PackedScene" uid="uid://bnieum86iucm3" path="res://scenes/enemies/boss_enemy/boss_enemy.tscn" id="8_6jcyl"]
[ext_resource type="Texture2D" uid="uid://w8h42vfpu73" path="res://assets/img/landscape/Wasser.png" id="8_6w5mp"]
[ext_resource type="Script" uid="uid://db74la8ju1ire" path="res://scenes/levels/level4/level4_enemy_manager.gd" id="8_q4udx"]
[ext_resource type="Script" uid="uid://dt6pw1siob5hb" path="res://scripts/utils/falldown_death.gd" id="9_doaon"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_cwptf"]
energy_multiplier = 0.0

[sub_resource type="Sky" id="Sky_27x05"]
sky_material = SubResource("ProceduralSkyMaterial_cwptf")

[sub_resource type="Environment" id="Environment_chqwm"]
background_mode = 2
sky = SubResource("Sky_27x05")
glow_enabled = true
glow_intensity = 5.65
glow_bloom = 0.07

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kbe5j"]
albedo_color = Color(0, 0.4871148, 0.9392707, 1)
albedo_texture = ExtResource("8_6w5mp")
metallic = 1.0
metallic_specular = 0.25
uv1_scale = Vector3(200, 200, 200)

[sub_resource type="BoxMesh" id="BoxMesh_b5byo"]

[sub_resource type="HeightMapShape3D" id="HeightMapShape3D_nakp7"]

[node name="Level4" type="Node3D" unique_id=1863322146]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=499462306]
transform = Transform3D(0.9787316, 0.17766102, -0.10257264, 2.7805946e-08, 0.49999994, 0.86602545, 0.20514527, -0.8476064, 0.4893657, 0, 142.41132, 0)
light_energy = 0.698
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=84886657]
environment = SubResource("Environment_chqwm")

[node name="Player" parent="." unique_id=640528251 instance=ExtResource("1_27x05")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.3546295, -4.9446106, -38.691925)

[node name="Level4Mask" parent="." unique_id=1513110693 instance=ExtResource("2_gor1f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 33.95359, 0, 23.551971)

[node name="island2" parent="." unique_id=154433558 instance=ExtResource("3_6jcyl")]
transform = Transform3D(30, 0, 0, 0, 30, 0, 0, 0, 30, 0, 0, 0)

[node name="Plane_001" parent="island2" index="0" unique_id=24039296]
surface_material_override/0 = ExtResource("4_q4udx")

[node name="StaticBody3D" type="StaticBody3D" parent="island2/Plane_001" index="0" unique_id=300476810]

[node name="CollisionShape3D" type="CollisionShape3D" parent="island2/Plane_001/StaticBody3D" unique_id=1513236673]
shape = ExtResource("5_gor1f")

[node name="Palm" type="Sprite3D" parent="island2" unique_id=1311949584]
transform = Transform3D(0.004999999, 0, 0, 0, 0.004999999, 0, 0, 0, 0.004999999, -0.30843508, -0.10811349, -0.70203775)
billboard = 2
render_priority = 2
texture = ExtResource("5_rnqjc")

[node name="Palm2" type="Sprite3D" parent="island2" unique_id=583687414]
transform = Transform3D(0.004999999, 0, 0, 0, 0.004999999, 0, 0, 0, 0.004999999, -0.12487757, -0.10811348, -0.7020377)
billboard = 2
render_priority = 2
texture = ExtResource("5_rnqjc")

[node name="Palm3" type="Sprite3D" parent="island2" unique_id=1602679802]
transform = Transform3D(0.004999999, 0, 0, 0, 0.004999999, 0, 0, 0, 0.004999999, -0.23346262, -0.10811347, -0.6356961)
billboard = 2
render_priority = 2
texture = ExtResource("5_rnqjc")

[node name="Palm4" type="Sprite3D" parent="island2" unique_id=746390625]
transform = Transform3D(0.004999999, 0, 0, 0, 0.004999999, 0, 0, 0, 0.004999999, -0.10181875, -0.10811346, -0.53721946)
billboard = 2
render_priority = 2
texture = ExtResource("5_rnqjc")

[node name="Palm5" type="Sprite3D" parent="island2" unique_id=830684044]
transform = Transform3D(0.004999999, 0, 0, 0, 0.004999999, 0, 0, 0, 0.004999999, -0.19607545, -0.10811346, -0.53721946)
billboard = 2
render_priority = 2
texture = ExtResource("5_rnqjc")

[node name="Palm6" type="Sprite3D" parent="island2" unique_id=1693102408]
transform = Transform3D(0.004999999, 0, 0, 0, 0.004999999, 0, 0, 0, 0.004999999, -0.335636, -0.10811346, -0.53721946)
billboard = 2
render_priority = 2
texture = ExtResource("5_rnqjc")

[node name="Palm7" type="Sprite3D" parent="island2" unique_id=1336121969]
transform = Transform3D(0.004999999, 0, 0, 0, 0.004999999, 0, 0, 0, 0.004999999, -0.41028664, -0.10811346, -0.6419032)
billboard = 2
render_priority = 2
texture = ExtResource("5_rnqjc")

[node name="EnemyManager" parent="." unique_id=2117646841 node_paths=PackedStringArray("mask", "enemy_container") instance=ExtResource("6_3jq6i")]
script = ExtResource("8_q4udx")
mask = NodePath("../Level4Mask")
enemy_container = NodePath("../Enemies")
boss_enemy_scene = ExtResource("8_6jcyl")

[node name="Enemies" type="Node" parent="." unique_id=742678875]

[node name="Water" type="MeshInstance3D" parent="." unique_id=285124709]
transform = Transform3D(10000, 0, 0, 0, 100, 0, 0, 0, 10000, 0, -63.34723, 0)
material_override = SubResource("StandardMaterial3D_kbe5j")
mesh = SubResource("BoxMesh_b5byo")

[node name="DeathFloor" type="Area3D" parent="." unique_id=1987555792]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -14.379726, 0)
script = ExtResource("9_doaon")
currentLevel = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="DeathFloor" unique_id=391360455]
transform = Transform3D(1000, 0, 0, 0, 1000, 0, 0, 0, 1000, 0, -2.2892017, 0)
shape = SubResource("HeightMapShape3D_nakp7")

[connection signal="body_entered" from="DeathFloor" to="DeathFloor" method="_on_body_entered"]

[editable path="island2"]
